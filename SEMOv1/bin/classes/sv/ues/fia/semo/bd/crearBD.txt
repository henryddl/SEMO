create table USUARIO(USERNAME VARCHAR2(10) not null,CODDOCENTE VARCHAR2(10),CARNET VARCHAR2(10),PASSWORD VARCHAR2(32) not null,TIPO INTEGER not null,constraint PK_USUARIO primary key (USERNAME) constraint FK_USUARIO_ALUMNO FOREIGN KEY (CARNET) REFERENCES ALUMNO(CARNET) ON DELETE RESTRICT,constraint FK_USUARIO_DOCENTE FOREIGN KEY (CODDOCENTE) REFERENCES DOCENTE(CODDOCENTE) ON DELETE RESTRICT);
create table ALUMNO(CARNET VARCHAR2(10) not null,USERNAME VARCHAR2(10),NOMBRE_ALUMNO VARCHAR2(100) not null,APELLIDO_ALUMNO VARCHAR2(100) not null,constraint PK_ALUMNO primary key (CARNET) constraint FK_ALUMNO_LOGIN FOREIGN KEY (USERNAME) REFERENCES USUARIO(USERNAME) ON DELETE RESTRICT);
create table DOCENTE(CODDOCENTE VARCHAR2(10) not null,USERNAME VARCHAR2(10),NOMBRE_DOCENTE VARCHAR2(100) not null,APELLIDO_DOCENTE VARCHAR2(100) not null,constraint PK_DOCENTE primary key (CODDOCENTE) constraint FK_DOCENTE_LOGIN FOREIGN KEY (USERNAME) REFERENCES USUARIO(USERNAME) ON DELETE RESTRICT);
create table CICLO(ANIO INTEGER not null,CICLO INTEGER not null,ESTADO VARCHAR2(10) not null,constraint PK_CICLO primary key (ANIO, CICLO));
create table MATERIA(CODMATERIA VARCHAR2(10) not null,NOMBRE VARCHAR2(50) not null,CICLO_PENSUM INTEGER,constraint PK_MATERIA primary key (CODMATERIA));
create table CURSO(ANIO INTEGER not null,CICLO INTEGER not null,CODMATERIA VARCHAR2(10) not null,NUMCURSO INTEGER not null,CODDOCENTE VARCHAR2(10),AULA VARCHAR2(10),HORA VARCHAR2(5),constraint PK_CURSO primary key (CODMATERIA, ANIO, CICLO, NUMCURSO) constraint FK_CURSO_CICLO FOREIGN KEY (ANIO,CICLO) REFERENCES CICLO(ANIO,CICLO) ON DELETE RESTRICT,constraint FK_CURSO_CICLO FOREIGN KEY (CODMATERIA) REFERENCES MATERIA(CODMATERIA) ON DELETE RESTRICT);
create table CATERGORIA(ANIO INTEGER,CICLO INTEGER,CODMATERIA VARCHAR2(10),NUMCURSO INTEGER not null,IDCATEGORIA INTEGER not null,NOMBRE_CATEGORIA VARCHAR2(50) not null,DESCRIPCION_CATEGORIA TEXT,constraint PK_CATERGORIA primary key (IDCATEGORIA) constraint FK_CATEGORIA_CURSO FOREIGN KEY (ANIO,CICLO,CODMATERIA,NUMCURSO) REFERENCES CURSO(ANIO,CICLO,CODMATERIA,NUMCURSO) ON DELETE RESTRICT);
create table SUBCATEGORIA(IDSUBCATEGORIA INTEGER not null,IDCATEGORIA INTEGER,NOMBRESUB_CATEGORIA VARCHAR2(50) not null,DESCRIPCION_SUBCATEGORIA TEXT,constraint PK_SUBCATEGORIA primary key (IDSUBCATEGORIA) constraint FK_SUCATEGORIA_CATEGORIA FOREIGN KEY (IDCATEGORIA) REFERENCES CATEGORIA(IDCATEGORIA) ON DELETE RESTRICT);
create table TIPO(CODTIPO VARCHAR2(10) not null,TIPOPREGUNTA VARCHAR2(50) not null,NUMRESPUESTA INTEGER,constraint PK_TIPO primary key (CODTIPO));
create table PREGUNTA(IDPREGUNTA INTEGER not null,IDSUBCATEGORIA INTEGER,CODTIPO VARCHAR2(10),PREGUNTA TEXT not null,PUNTAJE_PREGUNTA INTEGER not null,constraint PK_PREGUNTA primary key (IDPREGUNTA) constraint FK_PREGUNTA_TIPO FOREIGN KEY (CODTIPO) REFERENCES TIPO(CODTIPO) ON DELETE RESTRICT,constraint FK_PREGUNTA_SUBCATEGORIA FOREIGN KEY (IDSUBCATEGORIA) REFERENCES SUBCATEGORIA(IDSUBCATEGORIA) ON DELETE RESTRICT);
create table ITEM_RESPUESTA(IDITEM INTEGER not null,IDPREGUNTA INTEGER,RESPUESTA TEXT not null,PUNTOS_RESPUESTA INTEGER not null,constraint PK_ITEM_RESPUESTA primary key (IDITEM) constraint FK_ITEM_RESPUESTA_PREGUNTA FOREIGN KEY (IDPREGUNTA) REFERENCES PREGUNTA(IDPREGUNTA) ON DELETE RESTRICT);
create table EVALUACION(ANIO INTEGER,CICLO INTEGER,CODMATERIA VARCHAR2(10),NUMCURSO INTEGER,IDEVAL INTEGER not null,NOMBREEVAL VARCHAR2(20) not null,PORCENTAJE_EVAL FLOAT not null,constraint PK_EVALUACION primary key (IDEVAL) constraint FK_EVALUACION_CURSO FOREIGN KEY (ANIO,CICLO,CODMATERIA,NUMCURSO) REFERENCES CURSO(ANIO,CICLO,CODMATERIA,NUMCURSO) ON DELETE RESTRICT);
create table CONFIGURACION(IDSUBCATEGORIA INTEGER not null,IDEVAL INTEGER not null,NUMPREGUNTAS INTEGER,constraint PK_CONFIGURACION primary key (IDSUBCATEGORIA, IDEVAL) constraint FK_CONFIGURACON_EVALUACION FOREIGN KEY (IDEVAL) REFERENCES EVALUACION(IDEVAL) ON DELETE RESTRICT,constraint FK_CONFIGURACON_SUBCATERORIA FOREIGN KEY (IDSUBCATEGORIA) REFERENCES SUBCATEGORIA(IDSUBCATEGORIA) ON DELETE RESTRICT);
create table INSCRIBE(NUMCURSO INTEGER not null,ANIO INTEGER not null,CICLO INTEGER not null,CODMATERIA VARCHAR2(10) not null,CARNET VARCHAR2(10) not null,constraint PK_INSCRIBE primary key (NUMCURSO, ANIO, CICLO, CODMATERIA, CARNET) constraint FK_INCRIPCION_ALUMNO FOREIGN KEY (CARNET) REFERENCES ALUMNO(CARNET) ON DELETE RESTRICT,constraint FK_INCRIPCION_CURSO FOREIGN KEY (ANIO,CICLO,CODMATERIA,CARNET) REFERENCES CICLO(ANIO,CICLO,CODMATERIA,CARNET) ON DELETE RESTRICT);
create table CUESTIONARIO(IDCUESTIONARIO INTEGER not null,IDEVAL INTEGER,CARNET VARCHAR2(10),NUMPREGUNTAS INTEGER not null,PUNTAJEALUMNO INTEGER,NOTAALUMNO FLOAT,DISPONIBLE SMALLINT(1) not null,REALIZADO SMALLINT(1) not null,constraint PK_CUESTIONARIO primary key (IDCUESTIONARIO) constraint FK_CUESTIONARIO_EVALUACION FOREIGN KEY (IDEVAL) REFERENCES EVALUACION(IDEVAL) ON DELETE RESTRICT,constraint FK_CUESTIONARIO_ALUMNO FOREIGN KEY (CARNET) REFERENCES ALUMNO(CARNET) ON DELETE RESTRICT);
create table AS_PREGUNTAS(IDPREGUNTA INTEGER not null,IDCUESTIONARIO INTEGER not null,constraint PK_AS_PREGUNTAS primary key (IDPREGUNTA, IDCUESTIONARIO) constraint FK_AS_PREGUNTA_IDCUESTIONARIO FOREIGN KEY (IDCUESTIONARIO) REFERENCES CUESTIONARIO(IDCUESTIONARIO) ON DELETE RESTRICT,constraint FK_AS_PREGUNTA_PREGUNTA FOREIGN KEY (IDPREGUNTA) REFERENCES PREGUNTA(IDPREGUNTA) ON DELETE RESTRICT);
create table RESPUESTA(IDCUESTIONARIO INTEGER not null,IDPREGUNTA INTEGER not null,IDRESPUESTA INTEGER not null,RESPUESTA TEXT,PUNTOSOBTENIDOS INTEGER,constraint PK_RESPUESTA primary key (IDRESPUESTA) constraint FK_RESPUESTA_PREGUNTA FOREIGN KEY (IDCUESTIONARIO,IDPREGUNTA) REFERENCES AS_PREGUNTA(IDCUESTIONARIO,IDPREGUNTA) ON DELETE RESTRICT);